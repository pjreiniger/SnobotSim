import edu.wpi.first.nativeutils.NativeUtils
import org.gradle.api.file.FileCollection
import org.gradle.internal.os.OperatingSystem


evaluationDependsOn(':snobot_sim_utilities')
evaluationDependsOn(':sim_adx_family')
evaluationDependsOn(':sim_extension_navx')
evaluationDependsOn(':temp_hal_interface')

ext {
    baseId = "snobot_sim_java"
}

apply from: "${rootDir}/common/base_java_script.gradle"

apply from: "../create_version_file.gradle"
createJavaVersion("src/main/java/com/snobot/simulator/wrapper_accessors/java", "JaveSimulatorVersion", "com.snobot.simulator.wrapper_accessors.java", getVersionName())

configurations.maybeCreate("wpilibNativeDeps")
dependencies {
    compile 'edu.wpi.first.ntcore:ntcore-java:' + getNtCoreVersion()
    compile 'edu.wpi.first.cscore:cscore-java:' + getCsCoreVersion()
    //compile 'edu.wpi.first.cameraserver:cameraserver-java:' + allwpilibVersion()
    //compile 'edu.wpi.first.hal:hal-java:' + allwpilibVersion()
    compile 'edu.wpi.first.wpilibj:wpilibj-java:' + allwpilibVersion()
    compile 'org.apache.logging.log4j:log4j-api:2.11.0'
    compile 'org.apache.logging.log4j:log4j-core:2.11.0'
    compile project(":snobot_sim_utilities")
    compile project(':sim_adx_family')
    compile project(':sim_extension_navx')
    compile 'com.snobot.simulator:ctre_sim_override:' + getCtreSimVersion()
    testRuntime 'com.snobot.simulator:ctre_sim_override:' + getCtreSimVersion() + ':native-all'
    
    testCompile 'org.junit.jupiter:junit-jupiter-api:5.2.0'
    testCompile 'org.junit.jupiter:junit-jupiter-params:5.2.0'
    testRuntime 'org.junit.jupiter:junit-jupiter-engine:5.2.0'
    testRuntime 'org.junit.platform:junit-platform-launcher:1.2.0'
    testRuntime 'edu.wpi.first.ntcore:ntcore-jni:' + getNtCoreVersion() + ':all'
    testRuntime 'edu.wpi.first.cscore:cscore-jni:' + getCsCoreVersion() + ':all'
    testRuntime 'org.opencv:opencv-java:' + getWpilibOpencvVersion()
    testRuntime 'org.opencv:opencv-jni:' + getWpilibOpencvVersion() + ':all'
    
    testCompile "openrio.mirror.third.ctre:CTRE-phoenix-java:" + getCtreVersion()
    testCompile "openrio.mirror.third.kauailabs:navx-java:" + getNavxVersion()
    
    wpilibNativeDeps project(':sim_extension_navx').packageNativeFiles.outputs.files
    wpilibNativeDeps project(':sim_adx_family').packageNativeFiles.outputs.files
    
    
    
    compile project(':temp_hal_interface')
    compile project(':temp_hal_interface').packageNativeFiles.outputs.files
    wpilibNativeDeps project(':temp_hal_interface').packageNativeFiles.outputs.files
}

apply from: "${rootDir}/common/extract_native_libraries.gradle"
//classes.dependsOn project(':temp_hal_interface').packageNativeFiles
build.dependsOn project(':temp_hal_interface').build
extract_wpilib.dependsOn project(':temp_hal_interface').packageNativeFiles
extract_wpilib.dependsOn project(':temp_hal_interface').packageNativeFiles
test.dependsOn extract_wpilib
